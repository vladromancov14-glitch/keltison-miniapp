# ๐ง KะLTISON Mini App

ะะพะปะฝะพัะตะฝะฝะพะต Telegram Mini App ะดะปั ัะตะผะพะฝัะฐ ััััะพะนััะฒ ั ะะ-ะฟะพะผะพัะฝะธะบะพะผ, ะฐะดะผะธะฝ-ะฟะฐะฝะตะปัั ะธ PRO-ะฟะพะดะฟะธัะบะพะน.

## ๐ ะัะพะฑะตะฝะฝะพััะธ

- **๐ฑ Telegram WebApp** - ะะฐัะธะฒะฝัะน ะธะฝัะตััะตะนั ะฒ Telegram
- **๐ค ะะ-ะผะฐััะตั** - ะะตััะพะฝะฐะปัะฝัะน ะฟะพะผะพัะฝะธะบ ะฟะพ ัะตะผะพะฝัั
- **๐จโ๐ผ ะะดะผะธะฝ-ะฟะฐะฝะตะปั** - ะะพะปะฝัะน CRUD ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะบะพะฝัะตะฝัะพะผ
- **๐ PRO-ะฟะพะดะฟะธัะบะฐ** - ะะฐััะธัะตะฝะฝัะต ะธะฝััััะบัะธะธ ะธ ะบะพะฝััะปััะฐัะธะธ
- **๐๏ธ PostgreSQL** - ะะฐะดะตะถะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั
- **๐ณ Docker** - ะัะพััะพะน ะดะตะฟะปะพะน
- **๐ ะะตะทะพะฟะฐัะฝะพััั** - JWT ะฐััะตะฝัะธัะธะบะฐัะธั ะธ ะฒะฐะปะธะดะฐัะธั

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Telegram Bot  โ    โ   WebApp UI     โ    โ   Admin Panel   โ
โ                 โ    โ                 โ    โ                 โ
โ  - /start       โ    โ  - Categories   โ    โ  - CRUD Ops     โ
โ  - WebApp btn   โ    โ  - Instructions โ    โ  - File Upload  โ
โ  - Commands     โ    โ  - AI Chat      โ    โ  - Analytics    โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโ
                                 โ
                    โโโโโโโโโโโโโโโโโโโ
                    โ   Express API   โ
                    โ                 โ
                    โ  - /api/auth    โ
                    โ  - /api/admin   โ
                    โ  - /api/assistantโ
                    โ  - /api/*       โ
                    โโโโโโโโโโโโโโโโโโโ
                                 โ
                    โโโโโโโโโโโโโโโโโโโ
                    โ   PostgreSQL    โ
                    โ                 โ
                    โ  - Users        โ
                    โ  - Instructions โ
                    โ  - AI Sessions  โ
                    โ  - Subscriptionsโ
                    โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะัััััะน ััะฐัั

### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต ะธ ะฝะฐัััะพะนะบะฐ

```bash
git clone <repository-url>
cd keltison-miniapp

# ะกะบะพะฟะธััะนัะต ะธ ะฝะฐัััะพะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
cp env.example .env
```

### 2. ะะฐัััะพะนะบะฐ .env ัะฐะนะปะฐ

```bash
# Server Configuration
PORT=3000
NODE_ENV=development

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=keltison_db
DB_USER=postgres
DB_PASSWORD=your_password

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-here

# Telegram Configuration
TELEGRAM_BOT_TOKEN=your-telegram-bot-token-here
WEBAPP_URL=https://your-domain.com

# OpenAI Configuration (optional)
OPENAI_API_KEY=your-openai-api-key-here

# Admin Configuration
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_secure_password
```

### 3. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

```bash
npm install
```

### 4. ะะฐัััะพะนะบะฐ ะฑะฐะทั ะดะฐะฝะฝัั

```bash
# ะกะพะทะดะฐะนัะต ะฑะฐะทั ะดะฐะฝะฝัั PostgreSQL
createdb keltison_db

# ะะผะฟะพััะธััะนัะต ััะตะผั
psql keltison_db < database/keltison_schema.sql

# ะะผะฟะพััะธััะนัะต ัะตััะพะฒัะต ะดะฐะฝะฝัะต (ะพะฟัะธะพะฝะฐะปัะฝะพ)
node scripts/import-sample-data.js
```

### 5. ะะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั

```bash
# ะะตะถะธะผ ัะฐะทัะฐะฑะพัะบะธ
npm run dev

# ะัะพะดะฐะบัะฝ ัะตะถะธะผ
npm start
```

## ๐ณ Docker ะดะตะฟะปะพะน

### ะัััััะน ะดะตะฟะปะพะน ั Docker Compose

```bash
# ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน
git clone <repository-url>
cd keltison-miniapp

# ะะฐัััะพะนัะต .env ัะฐะนะป
cp env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env ัะฐะนะป

# ะะฐะฟัััะธัะต ะฒัะต ัะตัะฒะธัั
docker-compose up -d

# ะัะพะฒะตัััะต ััะฐััั
docker-compose ps
```

### ะััะฝะพะน ะดะตะฟะปะพะน

```bash
# ะกะพะฑะตัะธัะต ะพะฑัะฐะท
docker build -t keltison-miniapp .

# ะะฐะฟัััะธัะต ะบะพะฝัะตะนะฝะตั
docker run -d \
  --name keltison-app \
  -p 3000:3000 \
  --env-file .env \
  keltison-miniapp
```

## ๐ค ะะฐัััะพะนะบะฐ Telegram Bot

### 1. ะกะพะทะดะฐะฝะธะต ะฑะพัะฐ

1. ะัะบัะพะนัะต [@BotFather](https://t.me/botfather) ะฒ Telegram
2. ะัะฟัะฐะฒััะต ะบะพะผะฐะฝะดั `/newbot`
3. ะกะปะตะดัะนัะต ะธะฝััััะบัะธัะผ ะดะปั ัะพะทะดะฐะฝะธั ะฑะพัะฐ
4. ะกะพััะฐะฝะธัะต ะฟะพะปััะตะฝะฝัะน ัะพะบะตะฝ ะฒ `.env` ัะฐะนะป

### 2. ะะฐัััะพะนะบะฐ WebApp

1. ะัะฟัะฐะฒััะต ะบะพะผะฐะฝะดั `/setmenubutton` ะฒ @BotFather
2. ะัะฑะตัะธัะต ะฒะฐัะตะณะพ ะฑะพัะฐ
3. ะฃะบะฐะถะธัะต URL ะฒะฐัะตะณะพ WebApp: `https://your-domain.com`

### 3. ะะพะผะฐะฝะดั ะฑะพัะฐ

- `/start` - ะัะธะฒะตัััะฒะธะต ะธ ะบะฝะพะฟะบะฐ WebApp
- `/help` - ะกะฟัะฐะฒะบะฐ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- `/webapp` - ะััะผะฐั ัััะปะบะฐ ะฝะฐ WebApp

## ๐ฑ ะัะฟะพะปัะทะพะฒะฐะฝะธะต WebApp

### ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะธะฝัะตััะตะนั

1. **ะัะฑะพั ััััะพะนััะฒะฐ** - ๐ฑ ะขะตะปะตัะพะฝ, ๐ป ะะพััะฑัะบ, ๐งบ ะััะพะฒะฐั ัะตัะฝะธะบะฐ, ๐บ ะขะตะปะตะฒะธะทะพั
2. **ะัะฑะพั ะฑัะตะฝะดะฐ** - ะกะฟะธัะพะบ ะฑัะตะฝะดะพะฒ ะฟะพ ะบะฐัะตะณะพัะธะธ
3. **ะัะฑะพั ะผะพะดะตะปะธ** - ะะพะดะตะปะธ ะฒัะฑัะฐะฝะฝะพะณะพ ะฑัะตะฝะดะฐ
4. **ะัะฑะพั ะฟัะพะฑะปะตะผั** - ะขะธะฟะธัะฝัะต ะฟัะพะฑะปะตะผั ััััะพะนััะฒะฐ
5. **ะัะพัะผะพัั ะธะฝััััะบัะธะน** - ะะพัะฐะณะพะฒัะต ะธะฝััััะบัะธะธ ั ัะพัะพ/ะฒะธะดะตะพ

### ะะ-ะผะฐััะตั

- ะะฝะฐะปะธะทะธััะตั ะพะฟะธัะฐะฝะธะต ะฟัะพะฑะปะตะผั
- ะัะตะดะปะฐะณะฐะตั ะฟะพะดัะพะดััะธะต ะธะฝััััะบัะธะธ
- ะะฐะตั ัะพะฒะตัั ะฟะพ ัะตะผะพะฝัั
- ะัะตะดัะฟัะตะถะดะฐะตั ะพ ัะปะพะถะฝัั ัะปััะฐัั

### PRO-ะฟะพะดะฟะธัะบะฐ

- ะะฐััะธัะตะฝะฝัะต ะธะฝััััะบัะธะธ
- ะะตััะพะฝะฐะปัะฝัะต ะบะพะฝััะปััะฐัะธะธ ะะ
- ะัะธะพัะธัะตัะฝะฐั ะฟะพะดะดะตัะถะบะฐ
- ะญะบัะบะปัะทะธะฒะฝัะต ะผะฐัะตัะธะฐะปั

## ๐จโ๐ผ ะะดะผะธะฝ-ะฟะฐะฝะตะปั

ะะพัััะฟะฝะฐ ะฟะพ ะฐะดัะตัั: `https://your-domain.com/admin`

### ะคัะฝะบัะธะธ

- **๐ ะะฐัะฑะพัะด** - ะกัะฐัะธััะธะบะฐ ะธ ะฐะฝะฐะปะธัะธะบะฐ
- **๐ ะะฐัะตะณะพัะธะธ** - ะฃะฟัะฐะฒะปะตะฝะธะต ะบะฐัะตะณะพัะธัะผะธ ััััะพะนััะฒ
- **๐ท๏ธ ะัะตะฝะดั** - ะะพะฑะฐะฒะปะตะฝะธะต ะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฑัะตะฝะดะพะฒ
- **๐ฑ ะะพะดะตะปะธ** - ะฃะฟัะฐะฒะปะตะฝะธะต ะผะพะดะตะปัะผะธ ััััะพะนััะฒ
- **โ๏ธ ะัะพะฑะปะตะผั** - ะะฐัะฐะปะพะณ ัะธะฟะธัะฝัั ะฟัะพะฑะปะตะผ
- **๐ ะะฝััััะบัะธะธ** - ะกะพะทะดะฐะฝะธะต ะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะธะฝััััะบัะธะน
- **๐ค ะะฐััะฝะตัั** - ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะฐััะฝะตัะฐะผะธ

### ะะฐะณััะทะบะฐ ัะฐะนะปะพะฒ

- ะะพะดะดะตัะถะบะฐ ะธะทะพะฑัะฐะถะตะฝะธะน (JPG, PNG, GIF)
- ะะพะดะดะตัะถะบะฐ ะฒะธะดะตะพ (MP4, WebM)
- ะะฐะบัะธะผะฐะปัะฝัะน ัะฐะทะผะตั: 10MB
- Drag & Drop ะธะฝัะตััะตะนั

## ๐ API Endpoints

### ะััะตะฝัะธัะธะบะฐัะธั

```http
POST /api/auth/webapp-init
Content-Type: application/json

{
  "initData": "telegram_webapp_init_data"
}
```

### ะัะฑะปะธัะฝัะต API

```http
GET /api/categories          # ะกะฟะธัะพะบ ะบะฐัะตะณะพัะธะน
GET /api/brands?category_id=1 # ะัะตะฝะดั ะฟะพ ะบะฐัะตะณะพัะธะธ
GET /api/models?brand_id=1   # ะะพะดะตะปะธ ะฟะพ ะฑัะตะฝะดั
GET /api/problems?category_id=1 # ะัะพะฑะปะตะผั ะฟะพ ะบะฐัะตะณะพัะธะธ
GET /api/instructions?model_id=1&problem_id=1 # ะะฝััััะบัะธะธ
GET /api/partners            # ะกะฟะธัะพะบ ะฟะฐััะฝะตัะพะฒ
GET /api/search?q=iphone     # ะะพะธัะบ ะธะฝััััะบัะธะน
```

### ะะ-ะฐััะธััะตะฝั

```http
POST /api/assistant/chat
Authorization: Bearer <token>
Content-Type: application/json

{
  "message": "ะะต ะทะฐััะถะฐะตััั iPhone",
  "session_id": "optional_session_id"
}
```

### ะะดะผะธะฝ API

```http
GET /api/admin/stats         # ะกัะฐัะธััะธะบะฐ
GET /api/admin/categories    # CRUD ะบะฐัะตะณะพัะธะน
GET /api/admin/brands        # CRUD ะฑัะตะฝะดะพะฒ
GET /api/admin/models        # CRUD ะผะพะดะตะปะตะน
GET /api/admin/problems      # CRUD ะฟัะพะฑะปะตะผ
GET /api/admin/instructions  # CRUD ะธะฝััััะบัะธะน
GET /api/admin/partners      # CRUD ะฟะฐััะฝะตัะพะฒ
```

## ๐๏ธ ะะฐะทะฐ ะดะฐะฝะฝัั

### ะัะฝะพะฒะฝัะต ัะฐะฑะปะธัั

- **users** - ะะพะปัะทะพะฒะฐัะตะปะธ Telegram
- **categories** - ะะฐัะตะณะพัะธะธ ััััะพะนััะฒ
- **brands** - ะัะตะฝะดั
- **models** - ะะพะดะตะปะธ ััััะพะนััะฒ
- **problems** - ะขะธะฟะธัะฝัะต ะฟัะพะฑะปะตะผั
- **instructions** - ะะฝััััะบัะธะธ ะฟะพ ัะตะผะพะฝัั
- **partners** - ะะฐััะฝะตัั ะดะปั ะฟะพะบัะฟะบะธ ะทะฐะฟัะฐััะตะน
- **chat_sessions** - ะกะตััะธะธ ะะ-ัะฐัะฐ
- **subscriptions** - ะะพะดะฟะธัะบะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

### ะะผะฟะพัั ะดะฐะฝะฝัั

```bash
# ะะผะฟะพัั ััะตะผั
psql keltison_db < database/keltison_schema.sql

# ะะผะฟะพัั ัะตััะพะฒัั ะดะฐะฝะฝัั
node scripts/import-sample-data.js
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- **JWT ัะพะบะตะฝั** ะดะปั ะฐััะตะฝัะธัะธะบะฐัะธะธ
- **ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั** ะฝะฐ ะฒัะตั endpoints
- **Rate limiting** ะดะปั API
- **CORS** ะฝะฐัััะพะนะบะธ
- **Helmet** ะดะปั ะฑะตะทะพะฟะฐัะฝะพััะธ ะทะฐะณะพะปะพะฒะบะพะฒ
- **File upload** ะฒะฐะปะธะดะฐัะธั

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะััะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต

1. **WebApp ะธะฝัะตััะตะนั**
   - ะัะบัะพะนัะต `http://localhost:3000` ะฒ ะฑัะฐัะทะตัะต
   - ะัะพัะตััะธััะนัะต ะฝะฐะฒะธะณะฐัะธั ะฟะพ ะบะฐัะตะณะพัะธัะผ
   - ะัะพะฒะตัััะต ะะ-ัะฐั

2. **ะะดะผะธะฝ-ะฟะฐะฝะตะปั**
   - ะัะบัะพะนัะต `http://localhost:3000/admin`
   - ะะพะนะดะธัะต ั ััะตัะฝัะผะธ ะดะฐะฝะฝัะผะธ ะธะท .env
   - ะัะพัะตััะธััะนัะต CRUD ะพะฟะตัะฐัะธะธ

3. **Telegram Bot**
   - ะะฐะนะดะธัะต ะฒะฐัะตะณะพ ะฑะพัะฐ ะฒ Telegram
   - ะัะฟัะฐะฒััะต `/start`
   - ะะฐะถะผะธัะต ะบะฝะพะฟะบั WebApp

### API ัะตััะธัะพะฒะฐะฝะธะต

```bash
# ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั ัะตัะฒะตัะฐ
curl http://localhost:3000/health

# ะะพะปััะตะฝะธะต ะบะฐัะตะณะพัะธะน
curl http://localhost:3000/api/categories

# ะขะตัั ะะ-ัะฐัะฐ (ััะตะฑัะตั ัะพะบะตะฝ)
curl -X POST http://localhost:3000/api/assistant/chat \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"message": "ะะต ะทะฐััะถะฐะตััั ัะตะปะตัะพะฝ"}'
```

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะะพะณะธ

```bash
# Docker ะปะพะณะธ
docker-compose logs -f app

# ะกะธััะตะผะฝัะต ะปะพะณะธ
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

### Health Check

```bash
curl http://localhost:3000/health
```

ะัะฒะตั:
```json
{
  "status": "OK",
  "timestamp": "2024-01-01T00:00:00.000Z",
  "version": "1.0.0"
}
```

## ๐ง ะะฐะทัะฐะฑะพัะบะฐ

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
keltison-miniapp/
โโโ config/           # ะะพะฝัะธะณััะฐัะธั ะะ
โโโ database/         # SQL ััะตะผั ะธ ะดะฐะฝะฝัะต
โโโ middleware/       # Express middleware
โโโ public/          # Frontend ัะฐะนะปั
โ   โโโ index.html   # WebApp ะธะฝัะตััะตะนั
โ   โโโ admin.html   # ะะดะผะธะฝ-ะฟะฐะฝะตะปั
โ   โโโ app.js       # WebApp JavaScript
โ   โโโ admin.js     # Admin JavaScript
โ   โโโ styles.css   # ะกัะธะปะธ
โโโ routes/          # API ะผะฐัััััั
โโโ services/        # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โโโ scripts/         # ะฃัะธะปะธัั ะธ ัะบัะธะฟัั
โโโ uploads/         # ะะฐะณััะถะตะฝะฝัะต ัะฐะนะปั
โโโ server.js        # ะะปะฐะฒะฝัะน ัะฐะนะป ัะตัะฒะตัะฐ
โโโ package.json     # ะะฐะฒะธัะธะผะพััะธ
โโโ Dockerfile       # Docker ะพะฑัะฐะท
โโโ docker-compose.yml # Docker Compose
```

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั ััะฝะบัะธะน

1. **ะะพะฒัะน API endpoint**
   - ะะพะฑะฐะฒััะต ะผะฐััััั ะฒ `routes/`
   - ะะฑะฝะพะฒะธัะต ััะพะฝัะตะฝะด ะฒ `public/`

2. **ะะพะฒะฐั ัะฐะฑะปะธัะฐ ะะ**
   - ะะพะฑะฐะฒััะต ััะตะผั ะฒ `database/keltison_schema.sql`
   - ะกะพะทะดะฐะนัะต ะผะธะณัะฐัะธั

3. **ะะพะฒัะน UI ะบะพะผะฟะพะฝะตะฝั**
   - ะะพะฑะฐะฒััะต HTML/CSS ะฒ `public/`
   - ะะฑะฝะพะฒะธัะต JavaScript ะปะพะณะธะบั

## ๐ ะัะพะดะฐะบัะฝ ะดะตะฟะปะพะน

### ะะตะบะพะผะตะฝะดะฐัะธะธ

1. **ะัะฟะพะปัะทัะนัะต HTTPS** - ะะฑัะทะฐัะตะปัะฝะพ ะดะปั Telegram WebApp
2. **ะะฐัััะพะนัะต Nginx** - ะะปั reverse proxy ะธ SSL
3. **ะัะฟะพะปัะทัะนัะต PM2** - ะะปั ัะฟัะฐะฒะปะตะฝะธั ะฟัะพัะตััะฐะผะธ Node.js
4. **ะะฐัััะพะนัะต ะผะพะฝะธัะพัะธะฝะณ** - ะะพะณะธ, ะผะตััะธะบะธ, ะฐะปะตััั
5. **ะะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต** - ะะตะณัะปััะฝัะต ะฑัะบะฐะฟั ะะ

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะดะปั ะฟัะพะดะฐะบัะฝะฐ

```bash
NODE_ENV=production
WEBAPP_URL=https://your-domain.com
DB_PASSWORD=strong_password
JWT_SECRET=very_long_random_string
TELEGRAM_BOT_TOKEN=your_production_bot_token
```

## ๐ ะะพะดะดะตัะถะบะฐ

- **ะะพะบัะผะตะฝัะฐัะธั**: ะญัะพั README
- **Issues**: GitHub Issues
- **Telegram**: @keltison_support

## ๐ ะะธัะตะฝะทะธั

MIT License - ัะผ. ัะฐะนะป LICENSE

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

1. Fork ัะตะฟะพะทะธัะพัะธะน
2. ะกะพะทะดะฐะนัะต feature branch
3. Commit ะธะทะผะตะฝะตะฝะธั
4. Push ะฒ branch
5. ะกะพะทะดะฐะนัะต Pull Request

---

**KะLTISON** - ะะฐััะตั ัะตะผะพะฝัะฐ ะฒ ะฒะฐัะตะผ ะบะฐัะผะฐะฝะต! ๐งโจ
